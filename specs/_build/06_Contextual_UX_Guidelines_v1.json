{
  "version": "1.0.1",
  "meta": {
    "context": [
      "documents-view",
      "gallery"
    ]
  },
  "screens": [
    {
      "$schema": "../../_schemas/ctxux_screen.schema.json",
      "id": "documents-view",
      "title": "Просмотр документов",
      "desc": "Экран просмотра и поиска документов проекта с поддержкой фильтров и предпросмотра.",
      "local_principles": [
        {
          "id": "progressive-disclosure",
          "title": "Последовательное раскрытие",
          "rationale": "Показывать минимум по умолчанию и раскрывать детали по требованию.",
          "acceptance": [
            "Поиск доступен из одного фокуса",
            "Фильтры применяются без перезагрузки экрана"
          ],
          "telemetry": [
            "documents_search"
          ],
          "related_principles": [
            "one-screen-one-action",
            "minimize-required-input"
          ],
          "global_principle_ids": [
            "one-screen-one-action",
            "minimize-required-input"
          ],
          "user_story_ids": [
            "us-13",
            "us-14"
          ]
        }
      ],
      "refs": {
        "UserStory": [
          "us-13",
          "us-14"
        ],
        "HIG": [
          "search-bar",
          "list-filtering"
        ],
        "Wireframes": [
          "Figma:DL-Docs-View-v2"
        ],
        "DesignSystem": [
          "List",
          "SearchBar"
        ],
        "GlobalPrinciple": [
          "one-screen-one-action",
          "minimize-required-input"
        ],
        "UserFlow": [
          "documents-view"
        ]
      }
    },
    {
      "$schema": "../../_schemas/ctxux_screen.schema.json",
      "id": "export-decision",
      "title": "Выбор формата экспорта",
      "desc": "Экран выбора формата и канала экспорта отчёта.",
      "local_principles": [
        {
          "id": "clear-default-and-safe-cancel",
          "title": "Чёткий формат по умолчанию и безопасная отмена",
          "rationale": "По умолчанию предлагается совместимый формат PDF/A-2u, с явной возможностью отмены без потери данных.",
          "acceptance": [
            "Формат по умолчанию видим и отмечен",
            "Отмена возвращает на предыдущий экран без сайд-эффектов"
          ],
          "telemetry": [
            "export_options_view"
          ],
          "related_principles": [
            "one-screen-one-action",
            "explicit-status-signature-locking"
          ],
          "global_principle_ids": [
            "one-screen-one-action",
            "explicit-status-signature-locking"
          ],
          "user_story_ids": [
            "us-1",
            "us-2"
          ]
        }
      ],
      "refs": {
        "UserStory": [
          "us-1",
          "us-2"
        ],
        "GlobalPrinciple": [
          "one-screen-one-action",
          "explicit-status-signature-locking"
        ],
        "UserFlow": [
          "export-decision",
          "export-generate",
          "report-preview-signed"
        ]
      }
    },
    {
      "$schema": "../../_schemas/ctxux_screen.schema.json",
      "id": "gallery",
      "title": "Галерея вложений",
      "desc": "Экран просмотра и пакетного прикрепления фото к записям, с обработкой разрешений камеры.",
      "local_principles": [
        {
          "id": "fast-primary-action",
          "title": "Быстрое первичное действие",
          "rationale": "Основной CTA — быстрое прикрепление фотографий к текущему дню.",
          "acceptance": [
            "Кнопка прикрепления доступна в первом фокусе",
            "Пакетное выделение работает с озвучиванием количества выбранных элементов"
          ],
          "telemetry": [
            "gallery_bulk_attach",
            "photo_captured"
          ],
          "related_principles": [
            "one-screen-one-action",
            "offline-first-graceful-fallback"
          ],
          "global_principle_ids": [
            "one-screen-one-action",
            "offline-first-graceful-fallback"
          ],
          "user_story_ids": [
            "us-13"
          ]
        }
      ],
      "refs": {
        "UserStory": [
          "us-21"
        ],
        "HIG": [
          "camera",
          "photo-gallery"
        ],
        "Wireframes": [
          "Figma:DL-Gallery-v3"
        ],
        "DesignSystem": [
          "Grid",
          "Toolbar"
        ],
        "GlobalPrinciple": [
          "one-screen-one-action",
          "offline-first-graceful-fallback"
        ],
        "UserFlow": [
          "gallery",
          "capture-photo",
          "camera-permission",
          "camera-permission-error"
        ]
      }
    },
    {
      "$schema": "../../_schemas/ctxux_screen.schema.json",
      "id": "manual-weather",
      "title": "Ручной ввод погоды",
      "desc": "Экран ручного ввода метеоданных при оффлайне или отказе провайдера.",
      "local_principles": [
        {
          "id": "minimal-required-input",
          "title": "Минимум обязательного ввода",
          "rationale": "Просим только критичные поля и даём разумные значения по умолчанию.",
          "acceptance": [
            "Все поля подписаны и доступны в VoiceOver",
            "Сохранение возможно при заполнении минимального набора"
          ],
          "telemetry": [
            "manual_weather_input"
          ],
          "related_principles": [
            "minimize-required-input",
            "offline-first-graceful-fallback"
          ],
          "global_principle_ids": [
            "minimize-required-input",
            "offline-first-graceful-fallback"
          ],
          "user_story_ids": [
            "us-12"
          ]
        }
      ],
      "refs": {
        "UserStory": [
          "us-12"
        ],
        "GlobalPrinciple": [
          "minimize-required-input",
          "offline-first-graceful-fallback"
        ],
        "UserFlow": [
          "manual-weather",
          "check-network-for-weather",
          "fetch-weather"
        ]
      }
    },
    {
      "$schema": "../../_schemas/ctxux_screen.schema.json",
      "id": "projects-empty",
      "title": "Пустой список проектов",
      "desc": "Экран пустого списка с TipKit и CTA создания проекта.",
      "local_principles": [
        {
          "id": "empty-to-create-primary",
          "title": "Первичный CTA на пустом экране",
          "rationale": "Первичное действие на пустом экране должно быть максимально явным и доступным.",
          "acceptance": [
            "Основной CTA фокусируем по Tab первым",
            "Подсказка TipKit доступна для скринридера"
          ],
          "telemetry": [
            "empty_state_shown",
            "empty_state_cta_tapped"
          ],
          "related_principles": [
            "one-screen-one-action",
            "guide-and-request-in-the-moment"
          ],
          "global_principle_ids": [
            "one-screen-one-action",
            "guide-and-request-in-the-moment"
          ],
          "user_story_ids": [
            "us-10"
          ]
        }
      ],
      "refs": {
        "UserStory": [
          "us-10"
        ],
        "GlobalPrinciple": [
          "one-screen-one-action",
          "guide-and-request-in-the-moment"
        ],
        "UserFlow": [
          "projects-empty",
          "project-create"
        ]
      }
    }
  ],
  "local_principles": [
    {
      "id": "progressive-disclosure",
      "title": "Последовательное раскрытие",
      "rationale": "Показывать минимум по умолчанию и раскрывать детали по требованию.",
      "acceptance": [
        "Поиск доступен из одного фокуса",
        "Фильтры применяются без перезагрузки экрана"
      ],
      "telemetry": [
        "documents_search"
      ],
      "related_principles": [
        "one-screen-one-action",
        "minimize-required-input"
      ],
      "global_principle_ids": [
        "one-screen-one-action",
        "minimize-required-input"
      ],
      "user_story_ids": [
        "us-13",
        "us-14"
      ],
      "screen_id": "documents-view"
    },
    {
      "id": "clear-default-and-safe-cancel",
      "title": "Чёткий формат по умолчанию и безопасная отмена",
      "rationale": "По умолчанию предлагается совместимый формат PDF/A-2u, с явной возможностью отмены без потери данных.",
      "acceptance": [
        "Формат по умолчанию видим и отмечен",
        "Отмена возвращает на предыдущий экран без сайд-эффектов"
      ],
      "telemetry": [
        "export_options_view"
      ],
      "related_principles": [
        "one-screen-one-action",
        "explicit-status-signature-locking"
      ],
      "global_principle_ids": [
        "one-screen-one-action",
        "explicit-status-signature-locking"
      ],
      "user_story_ids": [
        "us-1",
        "us-2"
      ],
      "screen_id": "export-decision"
    },
    {
      "id": "fast-primary-action",
      "title": "Быстрое первичное действие",
      "rationale": "Основной CTA — быстрое прикрепление фотографий к текущему дню.",
      "acceptance": [
        "Кнопка прикрепления доступна в первом фокусе",
        "Пакетное выделение работает с озвучиванием количества выбранных элементов"
      ],
      "telemetry": [
        "gallery_bulk_attach",
        "photo_captured"
      ],
      "related_principles": [
        "one-screen-one-action",
        "offline-first-graceful-fallback"
      ],
      "global_principle_ids": [
        "one-screen-one-action",
        "offline-first-graceful-fallback"
      ],
      "user_story_ids": [
        "us-13"
      ],
      "screen_id": "gallery"
    },
    {
      "id": "minimal-required-input",
      "title": "Минимум обязательного ввода",
      "rationale": "Просим только критичные поля и даём разумные значения по умолчанию.",
      "acceptance": [
        "Все поля подписаны и доступны в VoiceOver",
        "Сохранение возможно при заполнении минимального набора"
      ],
      "telemetry": [
        "manual_weather_input"
      ],
      "related_principles": [
        "minimize-required-input",
        "offline-first-graceful-fallback"
      ],
      "global_principle_ids": [
        "minimize-required-input",
        "offline-first-graceful-fallback"
      ],
      "user_story_ids": [
        "us-12"
      ],
      "screen_id": "manual-weather"
    },
    {
      "id": "empty-to-create-primary",
      "title": "Первичный CTA на пустом экране",
      "rationale": "Первичное действие на пустом экране должно быть максимально явным и доступным.",
      "acceptance": [
        "Основной CTA фокусируем по Tab первым",
        "Подсказка TipKit доступна для скринридера"
      ],
      "telemetry": [
        "empty_state_shown",
        "empty_state_cta_tapped"
      ],
      "related_principles": [
        "one-screen-one-action",
        "guide-and-request-in-the-moment"
      ],
      "global_principle_ids": [
        "one-screen-one-action",
        "guide-and-request-in-the-moment"
      ],
      "user_story_ids": [
        "us-10"
      ],
      "screen_id": "projects-empty"
    }
  ]
}
